{% extends "base.html" %}

{% block title %}
    Join ClearScan - Medical Professional Registration
{% endblock %}

{% block main %}
<div class="min-vh-100 d-flex align-items-center py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-7 col-md-9">
                <div class="card border-0 shadow-lg rounded-4">
                    <!-- Header -->
                    <div class="card-header bg-gradient-primary text-white border-0 rounded-top-4">
                        <div class="text-center py-3">
                            <div class="d-flex align-items-center justify-content-center mb-2">
                                <i class="fas fa-stethoscope fa-2x me-3"></i>
                                <div>
                                    <h3 class="mb-0 fw-bold">Join ClearScan</h3>
                                    <small class="opacity-90">Medical Professional Registration</small>
                                </div>
                            </div>
                            <p class="mb-0 opacity-90">Create your professional account for medical image analysis</p>
                        </div>
                    </div>
                    
                    <!-- Form Body -->
                    <div class="card-body p-5">
                        <form method="POST" id="signupForm">
                            <div class="row g-4">
                                <!-- Personal Information -->
                                <div class="col-12">
                                    <h5 class="fw-bold text-primary mb-3">
                                        <i class="fas fa-user me-2"></i>Personal Information
                                    </h5>
                                </div>
                                
                                <div class="col-md-6">
                                    <label for="firstName" class="form-label fw-semibold">
                                        <i class="fas fa-user me-1"></i>First Name
                                    </label>
                                    <input type="text" class="form-control form-control-lg" id="firstName" name="firstName" 
                                           placeholder="Enter your first name" required>
                                </div>
                                
                                <div class="col-md-6">
                                    <label for="lastName" class="form-label fw-semibold">
                                        <i class="fas fa-user me-1"></i>Last Name
                                    </label>
                                    <input type="text" class="form-control form-control-lg" id="lastName" name="lastName" 
                                           placeholder="Enter your last name" required>
                                </div>
                                
                                <div class="col-md-6">
                                    <label for="email" class="form-label fw-semibold">
                                        <i class="fas fa-envelope me-1"></i>Professional Email
                                    </label>
                                    <input type="email" class="form-control form-control-lg" id="email" name="email" 
                                           placeholder="doctor@hospital.com" required>
                                </div>
                                
                                <div class="col-md-6">
                                    <label for="phone" class="form-label fw-semibold">
                                        <i class="fas fa-phone me-1"></i>Phone Number
                                    </label>
                                    <input type="tel" class="form-control form-control-lg" id="phone" name="phone" 
                                           placeholder="+27 XX XXX XXXX">
                                </div>
                                
                                <!-- Professional Information -->
                                <div class="col-12 mt-4">
                                    <h5 class="fw-bold text-success mb-3">
                                        <i class="fas fa-hospital me-2"></i>Professional Information
                                    </h5>
                                </div>
                                
                                <div class="col-md-6">
                                    <label for="profession" class="form-label fw-semibold">
                                        <i class="fas fa-user-md me-1"></i>Profession
                                    </label>
                                    <select class="form-select form-select-lg" id="profession" name="profession" required>
                                        <option value="">Select your profession</option>
                                        <option value="doctor">Medical Doctor (MD)</option>
                                        <option value="radiologist">Radiologist</option>
                                        <option value="nurse">Registered Nurse</option>
                                        <option value="technologist">Medical Technologist</option>
                                        <option value="specialist">Medical Specialist</option>
                                        <option value="resident">Medical Resident</option>
                                        <option value="other">Other Healthcare Professional</option>
                                    </select>
                                </div>
                                
                                <div class="col-md-6">
                                    <label for="license" class="form-label fw-semibold">
                                        <i class="fas fa-id-badge me-1"></i>License Number
                                    </label>
                                    <input type="text" class="form-control form-control-lg" id="license" name="license" 
                                           placeholder="Medical license number" required>
                                </div>
                                
                                <div class="col-md-6">
                                    <label for="institution" class="form-label fw-semibold">
                                        <i class="fas fa-hospital-alt me-1"></i>Medical Institution
                                    </label>
                                    <input type="text" class="form-control form-control-lg" id="institution" name="institution" 
                                           placeholder="Hospital/Clinic name" required>
                                </div>
                                
                                <div class="col-md-6">
                                    <label for="department" class="form-label fw-semibold">
                                        <i class="fas fa-sitemap me-1"></i>Department
                                    </label>
                                    <input type="text" class="form-control form-control-lg" id="department" name="department" 
                                           placeholder="Department/Specialty">
                                </div>
                                
                                <!-- Security -->
                                <div class="col-12 mt-4">
                                    <h5 class="fw-bold text-warning mb-3">
                                        <i class="fas fa-lock me-2"></i>Account Security
                                    </h5>
                                </div>
                                
                                <div class="col-md-6">
                                    <label for="password" class="form-label fw-semibold">
                                        <i class="fas fa-key me-1"></i>Password
                                    </label>
                                    <div class="input-group">
                                        <input type="password" class="form-control form-control-lg" id="password" name="password" 
                                               placeholder="Create strong password" required>
                                        <button class="btn btn-outline-secondary" type="button" id="togglePassword">
                                            <i class="fas fa-eye" id="passwordIcon"></i>
                                        </button>
                                    </div>
                                    <div class="form-text">
                                        <small class="text-muted">
                                            <i class="fas fa-info-circle me-1"></i>
                                            Must be 8+ characters with letters, numbers, and symbols
                                        </small>
                                    </div>
                                </div>
                                
                                <div class="col-md-6">
                                    <label for="confirmPassword" class="form-label fw-semibold">
                                        <i class="fas fa-key me-1"></i>Confirm Password
                                    </label>
                                    <input type="password" class="form-control form-control-lg" id="confirmPassword" name="confirmPassword" 
                                           placeholder="Confirm your password" required>
                                </div>
                                
                                <!-- Agreements -->
                                <div class="col-12 mt-4">
                                    <div class="card border border-info border-opacity-25">
                                        <div class="card-body p-4">
                                            <div class="form-check mb-3">
                                                <input class="form-check-input" type="checkbox" id="terms" name="terms" required>
                                                <label class="form-check-label" for="terms">
                                                    I agree to the <a href="#" class="text-primary fw-semibold">Terms of Service</a> 
                                                    and <a href="#" class="text-primary fw-semibold">Privacy Policy</a>
                                                </label>
                                            </div>
                                            
                                            <div class="form-check mb-3">
                                                <input class="form-check-input" type="checkbox" id="hipaa" name="hipaa" required>
                                                <label class="form-check-label" for="hipaa">
                                                    I understand and agree to HIPAA compliance requirements for patient data handling
                                                </label>
                                            </div>
                                            
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="updates" name="updates">
                                                <label class="form-check-label" for="updates">
                                                    Send me updates about new features and medical imaging insights
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Submit Button -->
                                <div class="col-12 text-center">
                                    <button type="submit" class="btn btn-primary btn-lg px-5 py-3 fw-semibold" id="registerBtn">
                                        <i class="fas fa-user-plus me-2"></i>Create Professional Account
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                    
                    <!-- Footer -->
                    <div class="card-footer bg-light border-0 rounded-bottom-4">
                        <div class="text-center py-3">
                            <p class="mb-0 text-muted">
                                Already have an account? 
                                <a href="/signin" class="text-primary fw-semibold text-decoration-none">
                                    Sign In Here
                                </a>
                            </p>
                        </div>
                    </div>
                </div>
                
                <!-- Verification Notice -->
                <div class="card border-0 shadow-sm mt-4">
                    <div class="card-body p-4">
                        <div class="d-flex align-items-start">
                            <i class="fas fa-user-check fa-2x text-info me-3 mt-1"></i>
                            <div>
                                <h6 class="fw-bold text-dark mb-2">Professional Verification Required</h6>
                                <p class="text-muted small mb-0">
                                    All medical professional accounts undergo verification to ensure platform security and compliance. 
                                    You'll receive verification instructions via email within 24 hours.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.bg-gradient-primary {
    background: linear-gradient(135deg, #0d6efd 0%, #6610f2 100%);
}

.card {
    transition: all 0.3s ease;
}

.form-control:focus, .form-select:focus {
    border-color: #0d6efd;
    box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
}

.input-group .form-control:focus {
    z-index: 3;
}

.btn {
    border-radius: 0.5rem;
    transition: all 0.3s ease;
}

.btn:hover {
    transform: translateY(-1px);
}

.min-vh-100 {
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
}

.form-control-lg, .form-select-lg {
    border-radius: 0.5rem;
    padding: 0.75rem 1rem;
}

.card-footer {
    background-color: rgba(248, 249, 250, 0.8) !important;
}

.form-check-input:checked {
    background-color: #0d6efd;
    border-color: #0d6efd;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Password visibility toggle
    const togglePassword = document.getElementById('togglePassword');
    const passwordInput = document.getElementById('password');
    const passwordIcon = document.getElementById('passwordIcon');
    
    togglePassword.addEventListener('click', function() {
        const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordInput.setAttribute('type', type);
        
        // Toggle icon
        if (type === 'password') {
            passwordIcon.classList.remove('fa-eye-slash');
            passwordIcon.classList.add('fa-eye');
        } else {
            passwordIcon.classList.remove('fa-eye');
            passwordIcon.classList.add('fa-eye-slash');
        }
    });
    
    // Password validation
    const confirmPassword = document.getElementById('confirmPassword');
    confirmPassword.addEventListener('input', function() {
        if (passwordInput.value !== confirmPassword.value) {
            confirmPassword.setCustomValidity('Passwords do not match');
        } else {
            confirmPassword.setCustomValidity('');
        }
    });
    
    passwordInput.addEventListener('input', function() {
        const password = passwordInput.value;
        const isValid = password.length >= 8 && 
                       /[A-Za-z]/.test(password) && 
                       /\d/.test(password) && 
                       /[!@#$%^&*(),.?":{}|<>]/.test(password);
        
        if (!isValid && password.length > 0) {
            passwordInput.setCustomValidity('Password must be 8+ characters with letters, numbers, and symbols');
        } else {
            passwordInput.setCustomValidity('');
        }
        
        // Recheck confirm password
        if (confirmPassword.value) {
            confirmPassword.dispatchEvent(new Event('input'));
        }
    });
    
    // Form submission
    document.getElementById('signupForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const submitBtn = document.getElementById('registerBtn');
        const originalText = submitBtn.innerHTML;
        
        // Show loading state
        submitBtn.disabled = true;
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Creating Account...';
        
        // Simulate registration process
        setTimeout(() => {
            // Reset button
            submitBtn.disabled = false;
            submitBtn.innerHTML = originalText;
            
            // Show success message and redirect
            alert('Account created successfully! Please check your email for verification instructions.');
            window.location.href = '/signin';
        }, 3000);
    });
    
    // License number validation based on profession
    const professionSelect = document.getElementById('profession');
    const licenseInput = document.getElementById('license');
    
    professionSelect.addEventListener('change', function() {
        const profession = this.value;
        if (profession === 'other') {
            licenseInput.required = false;
            licenseInput.placeholder = 'License number (if applicable)';
        } else {
            licenseInput.required = true;
            licenseInput.placeholder = 'Medical license number';
        }
    });
});
</script>
{% endblock %}









